---
sidebar: sidebar 
permalink: openshift/os-sm-data-protection.html 
keywords: NetApp Solutions, redhat OpenShift, red hat OpenShift, redhat openshift container platform, ocp, openshift container platform, Advanced Cluster Management, ACM, Hub Cluster, containers, container workloads, VMware, customer managed storage, ONTAP 
summary:  
---
= 使用Trident Protect 进行数据保护
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
此页面显示了使用Trident Protect (ACC) 在 VMware vSphere 或云中运行的基于 Red Hat OpenShift Container 的应用程序的数据保护选项。

当用户使用 Red Hat OpenShift 对其应用程序进行现代化改造时，应该制定数据保护策略来保护它们免受意外删除或任何其他人为错误的影响。通常，出于监管或合规目的，还需要制定保护策略来保护其数据免受灾难。

数据保护的要求多种多样，从恢复到某个时间点的副本到无需任何人工干预即可自动故障转移到不同的故障域。许多客户选择ONTAP作为其 Kubernetes 应用程序的首选存储平台，因为它具有丰富的功能，例如多租户、多协议、高性能和容量产品、多站点位置的复制和缓存、安全性和灵活性。

客户可以将云环境设置为其数据中心的扩展，以便他们可以利用云的优势，并为将来转移其工作负载做好准备。对于这样的客户，将他们的OpenShift应用程序和数据备份到云环境成为不可避免的选择。然后，他们可以将应用程序和相关数据恢复到云端或数据中心的 OpenShift 集群。



== 使用 ACC 备份和恢复

应用程序所有者可以审查和更新 ACC 发现的应用程序。 Trident Protect 可以使用 CSI 获取 Snapshot 副本，并使用时间点 Snapshot 副本执行备份。备份目标可以是云环境中的对象存储。可以为计划备份和要保留的备份版本数量配置保护策略。最小 RPO 为一小时。



=== 使用 ACC 从备份还原应用程序

image:rhhc-onprem-dp-br.png["Trident Protect 恢复选项"]



== 应用程序特定的执行钩子

即使存储阵列级数据保护功能可用，通常仍需要采取额外的步骤来确保备份和恢复应用程序的一致性。特定于应用程序的附加步骤可以是： - 在创建 Snapshot 副本之前或之后。  - 在创建备份之前或之后。  - 从 Snapshot 副本或备份恢复后。

Trident Protect 可以执行这些特定于应用程序的步骤，这些步骤被编码为称为执行钩子的自定义脚本。

NetApp 的link:https://github.com/NetApp/Verda["开源项目 Verda"]为流行的云原生应用程序提供执行挂钩，使保护应用程序变得简单、强大且易于协调。如果您拥有存储库中没有的应用程序的足够信息，请随意为该项目做出贡献。



== Redis 应用程序预快照的示例执行挂钩。

image:rhhc-onprem-dp-br-hook.png["Trident Protect 执行钩子"]



== 使用 ACC 进行复制

对于区域保护或低 RPO 和 RTO 解决方案，可以将应用程序复制到在不同站点（最好是在另一个区域）运行的另一个 Kubernetes 实例。 Trident Protect 利用ONTAP异步SnapMirror ，RPO 低至 5 分钟。参考link:https://docs.netapp.com/us-en/astra-control-center/use/replicate_snapmirror.html["此处"]有关SnapMirror设置说明。



=== 带有 ACC 的SnapMirror

image:rhhc-onprem-dp-rep.png["Trident Protect 复制"]


NOTE: san-economy 和 nas-economy 存储驱动程序不支持复制功能。参考link:https://docs.netapp.com/us-en/astra-control-center/get-started/requirements.html#astra-trident-requirements["此处"]了解更多详细信息。



=== 演示视频：

link:https://www.netapp.tv/details/29504?mcid=35609780286441704190790628065560989458["Trident Protect 灾难恢复演示视频"]

.使用Trident Protect 进行数据保护
video::0cec0c90-4c6f-4018-9e4f-b09700eefb3a[panopto,width=360]
有关Trident Protect 数据保护功能的详细信息link:https://docs.netapp.com/us-en/astra-control-center/concepts/data-protection.html["此处"]



== 使用 ACC 进行灾难恢复（使用复制进行故障转移和故障恢复）

.使用Astra Control 进行应用程序故障转移和故障恢复
video::1546191b-bc46-42eb-ac34-b0d60142c58d[panopto,width=360]