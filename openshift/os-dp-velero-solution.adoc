---
sidebar: sidebar 
permalink: openshift/os-dp-velero-solution.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OADP operator, Openshift Data Protection Application operator, Velero, app data protection, Containers 
summary: Red Hat OpenShift 容器应用程序数据保护与NetApp ONTAP 
---
= 使用 OpenShift API for Data Protection (OADP) 为 OpenShift Container Platform 中的容器应用提供数据保护
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
参考文档的此部分提供了在NetApp ONTAP S3 或NetApp StorageGRID S3 上使用 Velero 的 OpenShift API for Data Protection (OADP) 创建容器应用程序备份的详细信息。使用 CSI Trident Snapshots 创建应用程序的命名空间范围资源（包括持久卷 (PV)）的备份。

容器应用程序的持久存储可以通过使用集成到 OpenShift 集群的ONTAP存储来支持link:https://docs.netapp.com/us-en/trident/["Trident犯罪现场调查"]。在本节中我们使用link:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["OpenShift 数据保护 API (OADP)"]执行应用程序（包括其数据卷）的备份

* ONTAP对象存储
* 存储网格


然后我们在需要时从备份中恢复。请注意，应用程序只能恢复到创建备份的集群。

OADP 支持 OpenShift 集群上应用程序的备份、还原和灾难恢复。可以使用 OADP 保护的数据包括 Kubernetes 资源对象、持久卷和内部图像。

image:redhat-openshift-oadp-001.png["OpenShift 数据保护 API"]

Red Hat OpenShift 利用开源社区开发的解决方案来保护数据。link:https://velero.io/["维莱罗"]是一个开源工具，用于安全地备份和恢复、执行灾难恢复以及迁移 Kubernetes 集群资源和持久卷。为了轻松使用 Velero，OpenShift 开发了 OADP 操作符和 Velero 插件以与 CSI 存储驱动程序集成。所公开的 OADP API 的核心基于 Velero API。安装 OADP 操作器并配置后，可以执行的备份/恢复操作基于 Velero API 公开的操作。

image:redhat-openshift-oadp-002.png["OpenShift 数据保护 API"]

OADP 1.3 可从 OpenShift 集群 4.12 及更高版本的操作员中心获得。它有一个内置的数据移动器，可以将 CSI 卷快照移动到远程对象存储。通过在备份期间将快照移动到对象存储位置，这提供了可移植性和耐用性。灾难发生后，快照可用于恢复。

**以下是本节示例使用的各个组件的版本**

* OpenShift 集群 4.14
* Red Hat 提供的 OADP Operator 1.13
* 适用于 Linux 的 Velero CLI 1.13
* Trident24.02
* ONTAP 9.12
* 使用 helm 安装 postgresql。


link:https://docs.netapp.com/us-en/trident/["Trident犯罪现场调查"] link:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["OpenShift 数据保护 API (OADP)"] link:https://velero.io/["维莱罗"]
